<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>GYP - Input Format Reference</title><link rel="stylesheet" type="text/css" href="../+static/base.HLL9TqKl0YYybSzmT_wTdw.cache.css"/><link rel="stylesheet" type="text/css" href="../+static/doc.MXicahAOcEleYTBJrPykiw.cache.css"/><link rel="stylesheet" type="text/css" href="../+static/prettify/prettify.pZ5FqzM6cPxAflH0va2Ucw.cache.css"/></head><body class="Site"><header class="Site-header Site-header--withNavbar"><div class="Header"><div class="Header-title"><a class="Header-anchor" href="../index.md"><span class="Header-anchorTitle">GYP</span></a></div></div><nav class="Header-nav" role="navigation"><ul><li><a href="../index.md">Home</a></li><li><a href="UserDocumentation.md">User documentation</a></li><li><a href="InputFormatReference.md">Input Format Reference</a></li><li><a href="LanguageSpecification.md">Language specification</a></li><li><a href="Hacking.md">Hacking</a></li><li><a href="Testing.md">Testing</a></li><li><a href="GypVsCMake.md">GYP vs. CMake</a></li></ul></div></header><div class="Site-content Site-Content--markdown"><div class="Container"><div class="doc"><h1><a class="h" name="Input-Format-Reference" href="InputFormatReference.md#Input-Format-Reference"><span></span></a>Input Format Reference</h1><div class="toc" role="navigation"><h2>Contents</h2><div class="toc-aux"><ul><li><a href="InputFormatReference.md#Primitive-Types">Primitive Types</a></li><li><a href="InputFormatReference.md#Overall-Structure">Overall Structure</a></li><ul><li><a href="InputFormatReference.md#Comments">Comments (#)</a></li></ul><li><a href="InputFormatReference.md#Merging">Merging</a></li><ul><li><a href="InputFormatReference.md#Merge-Basics">Merge Basics (=, ?, +)</a></li></ul><li><a href="InputFormatReference.md#Pathname-Relativization">Pathname Relativization</a></li><li><a href="InputFormatReference.md#List-Singletons">List Singletons</a></li><li><a href="InputFormatReference.md#Including-Other-Files">Including Other Files</a></li><li><a href="InputFormatReference.md#Variables-and-Conditionals">Variables and Conditionals</a></li><ul><li><a href="InputFormatReference.md#Variables">Variables</a></li><li><a href="InputFormatReference.md#Providing-Default-Values-for-Variables">Providing Default Values for Variables (%)</a></li><li><a href="InputFormatReference.md#Predefined-Variables">Predefined Variables</a></li><li><a href="InputFormatReference.md#User_Defined-Variables">User-Defined Variables</a></li><li><a href="InputFormatReference.md#Variable-Expansions">Variable Expansions (&lt;, &gt;, &lt;@, &gt;@)</a></li><li><a href="InputFormatReference.md#Command-Expansions">Command Expansions (&lt;!, &lt;!@)</a></li></ul><li><a href="InputFormatReference.md#Conditionals">Conditionals</a></li><li><a href="InputFormatReference.md#Timing-of-Variable-Expansion-and-Conditional-Evaluation">Timing of Variable Expansion and Conditional Evaluation</a></li><ul><li><a href="InputFormatReference.md#Early-and-Late-Phases">Early and Late Phases</a></li><li><a href="InputFormatReference.md#Expansion-and-Evaluation-Performed-Simultaneously">Expansion and Evaluation Performed Simultaneously</a></li></ul><li><a href="InputFormatReference.md#Dependencies-and-Dependents">Dependencies and Dependents</a></li><ul><li><a href="InputFormatReference.md#Dependent-Settings">Dependent Settings</a></li></ul><li><a href="InputFormatReference.md#Linking-Dependencies">Linking Dependencies</a></li><li><a href="InputFormatReference.md#Loading-Files-to-Resolve-Dependencies">Loading Files to Resolve Dependencies</a></li><li><a href="InputFormatReference.md#Build-Configurations">Build Configurations</a></li><li><a href="InputFormatReference.md#List-Filters">List Filters</a></li><li><a href="InputFormatReference.md#Exclusion-Lists">Exclusion Lists (!)</a></li><li><a href="InputFormatReference.md#Pattern-Lists">Pattern Lists (/)</a></li><li><a href="InputFormatReference.md#Locating-Excluded-Items">Locating Excluded Items</a></li><li><a href="InputFormatReference.md#Processing-Order">Processing Order</a></li><li><a href="InputFormatReference.md#Settings-Keys">Settings Keys</a></li><ul><li><a href="InputFormatReference.md#Settings-that-may-appear-anywhere">Settings that may appear anywhere</a></li></ul></ul></div></div><h2><a class="h" name="Primitive-Types" href="InputFormatReference.md#Primitive-Types"><span></span></a>Primitive Types</h2><p>The following primitive types are found within input files:</p><ul><li><p>String values, which may be represented by enclosing them in <code class="code">&#39;single quotes&#39;</code> or <code class="code">&quot;double quotes&quot;</code>.  By convention, single quotes are used.</p></li><li><p>Integer values, which are represented in decimal without any special decoration.  Integers are fairly rare in input files, but have a few applications in boolean contexts, where the convention is to represent true values with <code class="code">1</code> and false with <code class="code">0</code>.</p></li><li><p>Lists, which are represented as a sequence of items separated by commas (<code class="code">,</code>) within square brackets (<code class="code">[</code> and <code class="code">]</code>).  A list may contain any other primitive types, including other lists. Generally, each item of a list must be of the same type as all other items in the list, but in some cases (such as within <code class="code">conditions</code> sections), the list structure is more tightly specified.  A trailing comma is permitted.</p><p>This example list contains three string values.</p><pre class="code">[ &#39;Generate&#39;, &#39;Your&#39;, &#39;Projects&#39;, ]
</pre></li><li><p>Dictionaries, which map keys to values.  All keys are strings. Values may be of any other primitive type, including other dictionaries.  A dictionary is enclosed within curly braces (<code class="code">{</code> and <code class="code">}</code>).  Keys precede values, separated by a colon (<code class="code">:</code>).  Successive dictionary entries are separated by commas (<code class="code">,</code>).  A trailing comma is permitted.  It is an error for keys to be duplicated within a single dictionary as written in an input file, although keys may replace other keys during <a href="InputFormatReference.md#Merging">merging</a>.</p><p>This example dictionary maps each of three keys to different values.</p><pre class="code">{
  &#39;inputs&#39;: [&#39;version.c.in&#39;],
  &#39;outputs&#39;: [&#39;version.c&#39;],
  &#39;process_outputs_as_sources&#39;: 1,
}
</pre></li></ul><h2><a class="h" name="Overall-Structure" href="InputFormatReference.md#Overall-Structure"><span></span></a>Overall Structure</h2><p>A GYP input file is organized as structured data.  At the root scope of each <code class="code">.gyp</code> or <code class="code">.gypi</code> (include) file is a dictionary.  The keys and values of this dictionary, along with any descendants contained within the values, provide the data contained within the file.  This data is given meaning by interpreting specific key names and their associated values in specific ways (see <a href="InputFormatReference.md#Settings_Keys">Settings Keys</a>).</p><h3><a class="h" name="Comments" href="InputFormatReference.md#Comments"><span></span></a>Comments (#)</h3><p>Within an input file, a comment is introduced by a pound sign (<code class="code">#</code>) not within a string.  Any text following the pound sign, up until the end of the line, is treated as a comment.</p><h4><a class="h" name="Overall-Structure-Comments-Example" href="InputFormatReference.md#Overall-Structure-Comments-Example"><span></span></a>Example</h4><pre class="code">{
  &#39;school_supplies&#39;: [
    &#39;Marble composition book&#39;,
    &#39;Sharp #2 pencil&#39;,
    &#39;Safety scissors&#39;,  # You still shouldn&#39;t run with these
  ],
}
</pre><p>In this example, the # in <code class="code">&#39;Sharp #2 pencil&#39;</code> is not taken as introducing a comment because it occurs within a string, but the text after <code class="code">&#39;Safety scissors&#39;</code> is treated as a comment having no impact on the data within the file.</p><h2><a class="h" name="Merging" href="InputFormatReference.md#Merging"><span></span></a>Merging</h2><h3><a class="h" name="Merge-Basics" href="InputFormatReference.md#Merge-Basics"><span></span></a>Merge Basics (=, ?, +)</h3><p>Many operations on GYP input files occurs by merging dictionary and list items together.  During merge operations, it is important to recognize the distinction between source and destination values.  Items from the source value are merged into the destination, which leaves the source unchanged and the destination modified by the source.  A dictionary may only be merged into another dictionary, and a list may only be merged into another list.</p><ul><li>When merging a dictionary, for each key in the source:<ul><li>If the key does not exist in the destination dictionary, insert it and copy the associated value directly.</li><li>If the key does exist:<ul><li>If the associated value is a dictionary, perform the dictionary merging procedure using the source&lsquo;s and destination&rsquo;s value dictionaries.</li><li>If the associated value is a list, perform the list merging procedure using the source&lsquo;s and destination&rsquo;s value lists.</li><li>If the associated value is a string or integer, the destination value is replaced by the source value.</li></ul></li></ul></li><li>When merging a list, merge according to the suffix appended to the key name, if the list is a value within a dictionary.<ul><li>If the key ends with an equals sign (<code class="code">=</code>), the policy is for the source list to completely replace the destination list if it exists.  <em>Mnemonic: <code class="code">=</code> for assignment.</em></li><li>If the key ends with a question mark (<code class="code">?</code>), the policy is for the source list to be set as the destination list only if the key is not already present in the destination.  <em>Mnemonic: <code class="code">?</code> for conditional assignment</em>.</li><li>If the key ends with a plus sign (<code class="code">+</code>), the policy is for the source list contents to be prepended to the destination list. <em>Mnemonic: <code class="code">+</code> for addition or concatenation.</em></li><li>If the list key is undecorated, the policy is for the source list contents to be appended to the destination list.  This is the default list merge policy.</li></ul></li></ul><h4><a class="h" name="Merging-Merge-Basics-Example" href="InputFormatReference.md#Merging-Merge-Basics-Example"><span></span></a>Example</h4><p>Source dictionary:</p><pre class="code">{
  &#39;include_dirs+&#39;: [
    &#39;shared_stuff/public&#39;,
  ],
  &#39;link_settings&#39;: {
    &#39;libraries&#39;: [
      &#39;-lshared_stuff&#39;,
    ],
  },
  &#39;test&#39;: 1,
}
</pre><p>Destination dictionary:</p><pre class="code">{
  &#39;target_name&#39;: &#39;hello&#39;,
  &#39;sources&#39;: [
    &#39;kitty.cc&#39;,
  ],
  &#39;include_dirs&#39;: [
    &#39;headers&#39;,
  ],
  &#39;link_settings&#39;: {
    &#39;libraries&#39;: [
      &#39;-lm&#39;,
    ],
    &#39;library_dirs&#39;: [
      &#39;/usr/lib&#39;,
    ],
  },
  &#39;test&#39;: 0,
}
</pre><p>Merged dictionary:</p><pre class="code">{
  &#39;target_name&#39;: &#39;hello&#39;,
  &#39;sources&#39;: [
    &#39;kitty.cc&#39;,
  ],
  &#39;include_dirs&#39;: [
    &#39;shared_stuff/public&#39;,  # Merged, list item prepended due to include_dirs+
    &#39;headers&#39;,
  ],
  &#39;link_settings&#39;: {
    &#39;libraries&#39;: [
      &#39;-lm&#39;,
      &#39;-lshared_stuff&#39;,  # Merged, list item appended
    ],
    &#39;library_dirs&#39;: [
      &#39;/usr/lib&#39;,
    ],
  },
  &#39;test&#39;: 1,  # Merged, int value replaced
}
</pre><h2><a class="h" name="Pathname-Relativization" href="InputFormatReference.md#Pathname-Relativization"><span></span></a>Pathname Relativization</h2><p>In a <code class="code">.gyp</code> or <code class="code">.gypi</code> file, many string values are treated as pathnames relative to the file in which they are defined.</p><p>String values associated with the following keys, or contained within lists associated with the following keys, are treated as pathnames:</p><ul><li>destination</li><li>files</li><li>include_dirs</li><li>inputs</li><li>libraries</li><li>outputs</li><li>sources</li><li>mac_bundle_resources</li><li>mac_framework_dirs</li><li>msvs_cygwin_dirs</li><li>msvs_props</li></ul><p>Additionally, string values associated with keys ending in the following suffixes, or contained within lists associated with keys ending in the following suffixes, are treated as pathnames:</p><ul><li><code class="code">_dir</code></li><li><code class="code">_dirs</code></li><li><code class="code">_file</code></li><li><code class="code">_files</code></li><li><code class="code">_path</code></li><li><code class="code">_paths</code></li></ul><p>However, any string value beginning with any of these characters is excluded from pathname relativization:</p><ul><li><code class="code">/</code> for identifying absolute paths.</li><li><code class="code">$</code> for introducing build system variable expansions.</li><li><code class="code">-</code> to support specifying such items as <code class="code">-llib</code>, meaning “library <code class="code">lib</code> in the library search path.”</li><li><code class="code">&lt;</code>, <code class="code">&gt;</code>, and <code class="code">!</code> for GYP expansions.</li></ul><p>When merging such relative pathnames, they are adjusted so that they can remain valid relative pathnames, despite being relative to a new home.</p><h4><a class="h" name="Pathname-Relativization-Example" href="InputFormatReference.md#Pathname-Relativization-Example"><span></span></a>Example</h4><p>Source dictionary from <code class="code">../build/common.gypi</code>:</p><pre class="code">{
  &#39;include_dirs&#39;: [&#39;include&#39;],  # Treated as relative to ../build
  &#39;libraries&#39;: [&#39;-lz&#39;],  # Not treated as a pathname, begins with a dash
  &#39;defines&#39;: [&#39;NDEBUG&#39;],  # defines does not contain pathnames
}
</pre><p>Target dictionary, from <code class="code">base.gyp</code>:</p><pre class="code">{
  &#39;sources&#39;: [&#39;string_util.cc&#39;],
}
</pre><p>Merged dictionary:</p><pre class="code">{
  &#39;sources&#39;: [&#39;string_util.cc&#39;],
  &#39;include_dirs&#39;: [&#39;../build/include&#39;],
  &#39;libraries&#39;: [&#39;-lz&#39;],
  &#39;defines&#39;: [&#39;NDEBUG&#39;],
}
</pre><p>Because of pathname relativization, after the merge is complete, all of the pathnames in the merged dictionary are valid relative to the directory containing <code class="code">base.gyp</code>.</p><h2><a class="h" name="List-Singletons" href="InputFormatReference.md#List-Singletons"><span></span></a>List Singletons</h2><p>Some list items are treated as singletons, and the list merge process will enforce special rules when merging them.  At present, any string item in a list that does not begin with a dash (<code class="code">-</code>) is treated as a singleton, although <strong>this is subject to change.</strong>  When appending or prepending a singleton to a list, if the item is already in the list, only the earlier instance is retained in the merged list.</p><h4><a class="h" name="List-Singletons-Example" href="InputFormatReference.md#List-Singletons-Example"><span></span></a>Example</h4><p>Source dictionary:</p><pre class="code">{
  &#39;defines&#39;: [
    &#39;EXPERIMENT=1&#39;,
    &#39;NDEBUG&#39;,
  ],
}
</pre><p>Destination dictionary:</p><pre class="code">{
  &#39;defines&#39;: [
    &#39;NDEBUG&#39;,
    &#39;USE_THREADS&#39;,
  ],
}
</pre><p>Merged dictionary:</p><pre class="code">{
  &#39;defines&#39;: [
    &#39;NDEBUG&#39;,
    &#39;USE_THREADS&#39;,
    &#39;EXPERIMENT=1&#39;,  # Note that NDEBUG is not appended after this.
  ],
}
</pre><h2><a class="h" name="Including-Other-Files" href="InputFormatReference.md#Including-Other-Files"><span></span></a>Including Other Files</h2><p>If the <code class="code">-I</code> (<code class="code">--include</code>) argument was used to invoke GYP, any files specified will be implicitly merged into the root dictionary of all <code class="code">.gyp</code> files.</p><p>An <a href="InputFormatReference.md#includes">includes</a> section may be placed anywhere within a <code class="code">.gyp</code> or <code class="code">.gypi</code> (include) file.  <code class="code">includes</code> sections contain lists of other files to include.  They are processed sequentially and merged into the enclosing dictionary at the point that the <code class="code">includes</code> section was found.  <code class="code">includes</code> sections at the root of a <code class="code">.gyp</code> file dictionary are merged after any <code class="code">-I</code> includes from the command line.</p><p><a href="InputFormatReference.md#includes">includes</a> sections are processed immediately after a file is loaded, even before <a href="InputFormatReference.md#Variables_and_Conditionals">variable and conditional processing</a>, so it is not possible to include a file based on a <a href="InputFormatReference.md#Variable_Expansions">variable reference</a>. While it would be useful to be able to include files based on variable expansions, it is most likely more useful to allow included files access to variables set by the files that included them.</p><p>An <a href="InputFormatReference.md#includes">includes</a> section may, however, be placed within a <a href="InputFormatReference.md#Conditionals">conditional</a> section.  The included file itself will be loaded unconditionally, but its dictionary will be discarded if the associated condition is not true.</p><h2><a class="h" name="Variables-and-Conditionals" href="InputFormatReference.md#Variables-and-Conditionals"><span></span></a>Variables and Conditionals</h2><h3><a class="h" name="Variables" href="InputFormatReference.md#Variables"><span></span></a>Variables</h3><p>There are three main types of variables within GYP.</p><ul><li>Predefined variables.  By convention, these are named with <code class="code">CAPITAL_LETTERS</code>.  Predefined variables are set automatically by GYP.  They may be overridden, but it is not advisable to do so.  See <a href="InputFormatReference.md#Predefined_Variables">Predefined Variables</a> for a list of variables that GYP provides.</li><li>User-defined variables.  Within any dictionary, a key named <code class="code">variables</code> can be provided, containing a mapping between variable names (keys) and their contents (values), which may be strings, integers, or lists of strings.  By convention, user-defined variables are named with <code class="code">lowercase_letters</code>.</li><li>Automatic variables.  Within any dictionary, any key with a string value has a corresponding automatic variable whose name is the same as the key name with an underscore (<code class="code">_</code>) prefixed.  For example, if your dictionary contains <code class="code">type: &#39;static_library&#39;</code>, an automatic variable named <code class="code">_type</code> will be provided, and its value will be a string, <code class="code">&#39;static_library&#39;</code>.</li></ul><p>Variables are inherited from enclosing scopes.</p><h3><a class="h" name="Providing-Default-Values-for-Variables" href="InputFormatReference.md#Providing-Default-Values-for-Variables"><span></span></a>Providing Default Values for Variables (%)</h3><p>Within a <code class="code">variables</code> section, keys named with percent sign (<code class="code">%</code>) suffixes mean that the variable should be set only if it is undefined at the time it is processed.  This can be used to provide defaults for variables that would otherwise be undefined, so that they may reliably be used in <a href="InputFormatReference.md#Variables_and_Conditionals">variable expansion or conditional processing</a>.</p><h3><a class="h" name="Predefined-Variables" href="InputFormatReference.md#Predefined-Variables"><span></span></a>Predefined Variables</h3><p>Each GYP generator module provides defaults for the following variables:</p><ul><li><p><code class="code">OS</code>: The name of the operating system that the generator produces output for.  Common values for values for <code class="code">OS</code> are:</p><ul><li><code class="code">&#39;linux&#39;</code></li><li><code class="code">&#39;mac&#39;</code></li><li><code class="code">&#39;win&#39;</code></li></ul><p>But other values may be encountered and this list should not be considered exhaustive.  The <code class="code">gypd</code> (debug) generator module does not provide a predefined value for <code class="code">OS</code>.  When invoking GYP with the <code class="code">gypd</code> module, if a value for <code class="code">OS</code> is needed, it must be provided on the command line, such as <code class="code">gyp -f gypd -DOS=mac</code>.</p><p>GYP generators also provide defaults for these variables.  They may be expressed in terms of variables used by the build system that they generate for, often in <code class="code">$(VARIABLE)</code> format.  For example, the GYP <code class="code">PRODUCT_DIR</code> variable maps to the Xcode <code class="code">BUILT_PRODUCTS_DIR</code> variable, so <code class="code">PRODUCT_DIR</code> is defined by the Xcode generator as <code class="code">$(BUILT_PRODUCTS_DIR)</code>.</p></li><li><p><code class="code">EXECUTABLE_PREFIX</code>: A prefix, if any, applied to executable names. Usually this will be an empty string.</p></li><li><p><code class="code">EXECUTABLE_SUFFIX</code>: A suffix, if any, applied to executable names. On Windows, this will be <code class="code">.exe</code>, elsewhere, it will usually be an empty string.</p></li><li><p><code class="code">INTERMEDIATE_DIR</code>: A directory that can be used to place intermediate build results in.  <code class="code">INTERMEDIATE_DIR</code> is only guaranteed to be accessible within a single target (See targets). This variable is most useful within the context of rules and actions (See rules, See actions).  Compare with <code class="code">SHARED_INTERMEDIATE_DIR</code>.</p></li><li><p><code class="code">PRODUCT_DIR</code>: The directory in which the primary output of each target, such as executables and libraries, is placed.</p></li><li><p><code class="code">RULE_INPUT_ROOT</code>: The base name for the input file (e.g. &ldquo;<code class="code">foo</code>&rdquo;). See Rules.</p></li><li><p><code class="code">RULE_INPUT_EXT</code>: The file extension for the input file (e.g. &ldquo;<code class="code">.cc</code>&rdquo;).  See Rules.</p></li><li><p><code class="code">RULE_INPUT_NAME</code>: Full name of the input file (e.g. &ldquo;<code class="code">foo.cc</code>&rdquo;). See Rules.</p></li><li><p><code class="code">RULE_INPUT_PATH</code>: Full path to the input file (e.g. &ldquo;<code class="code">/bar/foo.cc</code>&rdquo;).  See Rules.</p></li><li><p><code class="code">SHARED_INTERMEDIATE_DIR</code>: A directory that can be used to place intermediate build results in, and have them be accessible to other targets.  Unlike <code class="code">INTERMEDIATE_DIR</code>, each target in a project, possibly spanning multiple <code class="code">.gyp</code> files, shares the same <code class="code">SHARED_INTERMEDIATE_DIR</code>.</p></li></ul><p>The following additional predefined variables may be available under certain circumstances:</p><ul><li><code class="code">DEPTH</code>.  When GYP is invoked with a <code class="code">--depth</code> argument, when processing any <code class="code">.gyp</code> file, <code class="code">DEPTH</code> will be a relative path from the <code class="code">.gyp</code> file to the directory specified by the <code class="code">--depth</code> argument.</li></ul><h3><a class="h" name="User_Defined-Variables" href="InputFormatReference.md#User_Defined-Variables"><span></span></a>User-Defined Variables</h3><p>A user-defined variable may be defined in terms of other variables, but not other variables that have definitions provided in the same scope.</p><h3><a class="h" name="Variable-Expansions" href="InputFormatReference.md#Variable-Expansions"><span></span></a>Variable Expansions (&lt;, &gt;, &lt;@, &gt;@)</h3><p>GYP provides two forms of variable expansions, “early” or “pre” expansions, and “late,” “post,” or “target” expansions.  They have similar syntax, differing only in the character used to introduce them.</p><ul><li>Early expansions are introduced by a less-than (<code class="code">&lt;</code>) character. <em>Mnemonic: the arrow points to the left, earlier on a timeline.</em></li><li>Late expansions are introduced by a less-than (<code class="code">&gt;</code>) character. <em>Mnemonic: the arrow points to the right, later on a timeline.</em></li></ul><p>The difference the two phases of expansion is described in <a href="InputFormatReference.md#Early_and_Late_Phases">Early and Late Phases</a>.</p><p>These characters were chosen based upon the requirement that they not conflict with the variable format used natively by build systems.  While the dollar sign (<code class="code">$</code>) is the most natural fit for variable expansions, its use was ruled out because most build systems already use that character for their own variable expansions.  Using different characters means that no escaping mechanism was needed to differentiate between GYP variables and build system variables, and writing build system variables into GYP files is not cumbersome.</p><p>Variables may contain lists or strings, and variable expansions may occur in list or string context.  There are variant forms of variable expansions that may be used to determine how each type of variable is to be expanded in each context.</p><ul><li>When a variable is referenced by <code class="code">&lt;(VAR)</code> or <code class="code">&gt;(VAR)</code>:<ul><li>If <code class="code">VAR</code> is a string, the variable reference within the string is replaced by variable&#39;s string value.</li><li>If <code class="code">VAR</code> is a list, the variable reference within the string is replaced by a string containing the concatenation of all of the variable’s list items.  Generally, the items are joined with spaces between each, but the specific behavior is generator-specific.  The precise encoding used by any generator should be one that would allow each list item to be treated as a separate argument when used as program arguments on the system that the generator produces output for.</li></ul></li><li>When a variable is referenced by <code class="code">&lt;@(VAR)</code> or <code class="code">&gt;@(VAR)</code>:<ul><li>The expansion must occur in list context.</li><li>The list item must be <code class="code">&#39;&lt;@(VAR)&#39;</code> or <code class="code">&#39;&gt;@(VAR)&#39;</code> exactly.</li><li>If <code class="code">VAR</code> is a list, each of its elements are inserted into the list in which expansion is taking place, replacing the list item containing the variable reference.</li><li>If <code class="code">VAR</code> is a string, the string is converted to a list which is inserted into the list in which expansion is taking place as above.  The conversion into a list is generator-specific, but generally, spaces in the string are taken as separators between list items.  The specific method of converting the string to a list should be the inverse of the encoding method used to expand list variables in string context, above.</li></ul></li></ul><p>GYP treats references to undefined variables as errors.</p><h3><a class="h" name="Command-Expansions" href="InputFormatReference.md#Command-Expansions"><span></span></a>Command Expansions (&lt;!, &lt;!@)</h3><p>Command expansions function similarly to variable expansions, but instead of resolving variable references, they cause GYP to execute a command at generation time and use the command’s output as the replacement.  Command expansions are introduced by a less than and exclamation mark (<code class="code">&lt;!</code>).</p><p>In a command expansion, the entire string contained within the parentheses is passed to the system’s shell.  The command’s output is assigned to a string value that may subsequently be expanded in list context in the same way as variable expansions if an <code class="code">@</code> character is used.</p><p>In addition, command expansions (unlike other variable expansions) may include nested variable expansions.  So something like this is allowed:</p><pre class="code">&#39;variables&#39; : [
  &#39;foo&#39;: &#39;&lt;!(echo Build Date &lt;!(date))&#39;,
],
</pre><p>expands to:</p><pre class="code">&#39;variables&#39; : [
  &#39;foo&#39;: &#39;Build Date 02:10:38 PM Fri Jul 24, 2009 -0700 PDT&#39;,
],
</pre><p>You may also put commands into arrays in order to quote arguments (but note that you need to use a different string quoting character):</p><pre class="code">&#39;variables&#39; : [
  &#39;files&#39;: &#39;&lt;!([&quot;ls&quot;, &quot;-1&quot;, &quot;Filename With Spaces&quot;])&#39;,
],
</pre><p>GYP treats command failures (as indicated by a nonzero exit status) during command expansion as errors.</p><h4><a class="h" name="Variables-and-Conditionals-Command-Expansions-Example" href="InputFormatReference.md#Variables-and-Conditionals-Command-Expansions-Example"><span></span></a>Example</h4><pre class="code">{
  &#39;sources&#39;: [
    &#39;!(echo filename with space.cc)&#39;,
  ],
  &#39;libraries&#39;: [
    &#39;!@(pkg-config --libs-only-l apr-1)&#39;,
  ],
}
</pre><p>might expand to:</p><pre class="code">{
  &#39;sources&#39;: [
    &#39;filename with space.cc&#39;,  # no @, expands into a single string
  ],
  &#39;libraries&#39;: [  # @ was used, so there&#39;s a separate list item for each lib
    &#39;-lapr-1&#39;,
    &#39;-lpthread&#39;,
  ],
}
</pre><h2><a class="h" name="Conditionals" href="InputFormatReference.md#Conditionals"><span></span></a>Conditionals</h2><p>Conditionals use the same set of variables used for variable expansion. As with variable expansion, there are two phases of conditional evaluation:</p><ul><li>“Early” or “pre” conditional evaluation, introduced in <a href="InputFormatReference.md#conditions">conditions</a> sections.</li><li>“Late,” “post,” or “target” conditional evaluation, introduced in <a href="InputFormatReference.md#target_conditions">target_conditions</a> sections.</li></ul><p>The syntax for each type is identical, they differ only in the key name used to identify them and the timing of their evaluation.  A more complete description of syntax and use is provided in <a href="InputFormatReference.md#conditions">conditions</a>.</p><p>The difference the two phases of evaluation is described in <a href="InputFormatReference.md#Early_and_Late_Phases">Early and Late Phases</a>.</p><h2><a class="h" name="Timing-of-Variable-Expansion-and-Conditional-Evaluation" href="InputFormatReference.md#Timing-of-Variable-Expansion-and-Conditional-Evaluation"><span></span></a>Timing of Variable Expansion and Conditional Evaluation</h2><h3><a class="h" name="Early-and-Late-Phases" href="InputFormatReference.md#Early-and-Late-Phases"><span></span></a>Early and Late Phases</h3><p>GYP performs two phases of variable expansion and conditional evaluation:</p><ul><li>The “early” or “pre” phase operates on <a href="InputFormatReference.md#conditions">conditions</a> sections and the <code class="code">&lt;</code> form of <a href="InputFormatReference.md#Variable_Expansions">variable expansions</a>.</li><li>The “late,” “post,” or “target” phase operates on <a href="InputFormatReference.md#target_conditions">target_conditions</a> sections, the <code class="code">&gt;</code> form of <a href="InputFormatReference.md#Variable_Expansions">variable expansions</a>, and on the <code class="code">!</code> form of <a href="InputFormatReference.md#Command_Expansions_%28!,_!@%29">command expansions</a>.</li></ul><p>These two phases are provided because there are some circumstances in which each is desirable.</p><p>The “early” phase is appropriate for most expansions and evaluations. “Early” expansions and evaluations may be performed anywhere within any <code class="code">.gyp</code> or <code class="code">.gypi</code> file.</p><p>The “late” phase is appropriate when expansion or evaluation must be deferred until a specific section has been merged into target context. “Late” expansions and evaluations only occur within <code class="code">targets</code> sections and their descendants.  The typical use case for a late-phase expansion is to provide, in some globally-included <code class="code">.gypi</code> file, distinct behaviors depending on the specifics of a target.</p><h4><a class="h" name="Timing-of-Variable-Expansion-and-Conditional-Evaluation-Early-and-Late-Phases-Example" href="InputFormatReference.md#Timing-of-Variable-Expansion-and-Conditional-Evaluation-Early-and-Late-Phases-Example"><span></span></a>Example</h4><p>Given this input:</p><pre class="code">{
  &#39;target_defaults&#39;: {
    &#39;target_conditions&#39;: [
      [&#39;_type==&quot;shared_library&quot;&#39;, {&#39;cflags&#39;: [&#39;-fPIC&#39;]}],
    ],
  },
  &#39;targets&#39;: [
    {
      &#39;target_name&#39;: &#39;sharing_is_caring&#39;,
      &#39;type&#39;: &#39;shared_library&#39;,
    },
    {
      &#39;target_name&#39;: &#39;static_in_the_attic&#39;,
      &#39;type&#39;: &#39;static_library&#39;,
    },
  ]
}
</pre><p>The conditional needs to be evaluated only in target context; it is nonsense outside of target context because no <code class="code">_type</code> variable is defined.  <a href="InputFormatReference.md#target_conditions">target_conditions</a> allows evaluation to be deferred until after the <a href="InputFormatReference.md#targets">targets</a> sections are merged into their copies of <a href="InputFormatReference.md#target_defaults">target_defaults</a>. The resulting targets, after “late” phase processing:</p><pre class="code">{
  &#39;targets&#39;: [
    {
      &#39;target_name&#39;: &#39;sharing_is_caring&#39;,
      &#39;type&#39;: &#39;shared_library&#39;,
      &#39;cflags&#39;: [&#39;-fPIC&#39;],
    },
    {
      &#39;target_name&#39;: &#39;static_in_the_attic&#39;,
      &#39;type&#39;: &#39;static_library&#39;,
    },
  ]
}
</pre><h3><a class="h" name="Expansion-and-Evaluation-Performed-Simultaneously" href="InputFormatReference.md#Expansion-and-Evaluation-Performed-Simultaneously"><span></span></a>Expansion and Evaluation Performed Simultaneously</h3><p>During any expansion and evaluation phase, both expansion and evaluation are performed simultaneously.  The process for handling variable expansions and conditional evaluation within a dictionary is:</p><ul><li>Load <a href="InputFormatReference.md#Variables">automatic variables</a> (those with leading underscores).</li><li>If a <a href="InputFormatReference.md#variables">variables</a> section is present, recurse into its dictionary.  This allows <a href="InputFormatReference.md#Conditionals">conditionals</a> to be present within the <code class="code">variables</code> dictionary.</li><li>Load <a href="InputFormatReference.md#User-Defined">Variables user-defined variables</a> from the <a href="InputFormatReference.md#variables">variables</a> section.</li><li>For each string value in the dictionary, perform <a href="InputFormatReference.md#Variable_Expansions">variable expansion</a> and, if operating during the “late” phase, <a href="InputFormatReference.md#Command_Expansions">command expansions</a>.</li><li>Reload <a href="InputFormatReference.md#Variables">automatic variables</a> and <a href="InputFormatReference.md#User-Defined">Variables user-defined variables</a> because the variable expansion step may have resulted in changes to the automatic variables.</li><li>If a <a href="InputFormatReference.md#conditions">conditions</a> or <a href="InputFormatReference.md#target_conditions">target_conditions</a> section (depending on phase) is present, recurse into its dictionary.  This is done after variable expansion so that conditionals may take advantage of expanded automatic variables.</li><li>Evaluate <a href="InputFormatReference.md#Conditionals">conditionals</a>.</li><li>Reload <a href="InputFormatReference.md#Variables">automatic variables</a> and <a href="InputFormatReference.md#User-Defined">Variables user-defined variables</a> because the conditional evaluation step may have resulted in changes to the automatic variables.</li><li>Recurse into child dictionaries or lists that have not yet been processed.</li></ul><p>One quirk of this ordering is that you cannot expect a <a href="InputFormatReference.md#variables">variables</a> section within a dictionary’s <a href="InputFormatReference.md#Conditionals">conditional</a> to be effective in the dictionary itself, but the added variables will be effective in any child dictionaries or lists.  It is thought to be far more worthwhile to provide resolved <a href="InputFormatReference.md#Variables">automatic variables</a> to <a href="InputFormatReference.md#Conditionals">conditional</a> sections, though.  As a workaround, to conditionalize variable values, place a <a href="InputFormatReference.md#conditions">conditions</a> or <a href="InputFormatReference.md#target_conditions">target_conditions</a> section within the <a href="InputFormatReference.md#variables">variables</a> section.</p><h2><a class="h" name="Dependencies-and-Dependents" href="InputFormatReference.md#Dependencies-and-Dependents"><span></span></a>Dependencies and Dependents</h2><p>In GYP, “dependents” are targets that rely on other targets, called “dependencies.”  Dependents declare their reliance with a special section within their target dictionary, <a href="InputFormatReference.md#dependencies">dependencies</a>.</p><h3><a class="h" name="Dependent-Settings" href="InputFormatReference.md#Dependent-Settings"><span></span></a>Dependent Settings</h3><p>It is useful for targets to “advertise” settings to their dependents. For example, a target might require that all of its dependents add certain directories to their include paths, link against special libraries, or define certain preprocessor macros.  GYP allows these cases to be handled gracefully with “dependent settings” sections. There are three types of such sections:</p><ul><li><a href="InputFormatReference.md#direct_dependent_settings">direct_dependent_settings</a>, which advertises settings to a target&#39;s direct dependents only.</li><li><a href="InputFormatReference.md#all_dependnet_settings">all_dependent_settings</a>, which advertises settings to all of a target&#39;s dependents, both direct and indirect.</li><li><a href="InputFormatReference.md#link_settings">link_settings</a>, which contains settings that should be applied when a target’s object files are used as linker input.</li></ul><p>Furthermore, in some cases, a target needs to pass its dependencies’ settings on to its own dependents.  This might happen when a target’s own public header files include header files provided by its dependency. <a href="InputFormatReference.md#export_dependent_settings">export_dependent_settings</a> allows a target to declare dependencies for which <a href="InputFormatReference.md#direct_dependent_settings">direct_dependent_settings</a> should be passed through to its own dependents.</p><p>Dependent settings processing merges a copy of the relevant dependent settings dictionary from a dependency into its relevant dependent targets.</p><p>In most instances, <a href="InputFormatReference.md#direct_dependent_settings">direct_dependent_settings</a> will be used.  There are very few cases where <a href="InputFormatReference.md#all_dependent_settings">all_dependent_settings</a> is actually correct; in most of the cases where it is tempting to use, it would be preferable to declare <a href="InputFormatReference.md#export_dependent_settings">export_dependent_settings</a>.  Most <a href="InputFormatReference.md#libraries">libraries</a> and <a href="InputFormatReference.md#library_dirs">library_dirs</a> sections should be placed within <a href="InputFormatReference.md#link_settings">link_settings</a> sections.</p><h4><a class="h" name="Dependencies-and-Dependents-Dependent-Settings-Example" href="InputFormatReference.md#Dependencies-and-Dependents-Dependent-Settings-Example"><span></span></a>Example</h4><p>Given:</p><pre class="code">{
  &#39;targets&#39;: [
    {
      &#39;target_name&#39;: &#39;cruncher&#39;,
      &#39;type&#39;: &#39;static_library&#39;,
      &#39;sources&#39;: [&#39;cruncher.cc&#39;],
      &#39;direct_dependent_settings&#39;: {
        &#39;include_dirs&#39;: [&#39;.&#39;],  # dependents need to find cruncher.h.
      },
      &#39;link_settings&#39;: {
        &#39;libraries&#39;: [&#39;-lm&#39;],  # cruncher.cc does math.
      },
    },
    {
      &#39;target_name&#39;: &#39;cruncher_test&#39;,
      &#39;type&#39;: &#39;executable&#39;,
      &#39;dependencies&#39;: [&#39;cruncher&#39;],
      &#39;sources&#39;: [&#39;cruncher_test.cc&#39;],
    },
  ],
}
</pre><p>After dependent settings processing, the dictionary for <code class="code">cruncher_test</code> will be:</p><pre class="code">{
  &#39;target_name&#39;: &#39;cruncher_test&#39;,
  &#39;type&#39;: &#39;executable&#39;,
  &#39;dependencies&#39;: [&#39;cruncher&#39;],  # implies linking against cruncher
  &#39;sources&#39;: [&#39;cruncher_test.cc&#39;],
  &#39;include_dirs&#39;: [&#39;.&#39;]
  &#39;libraries&#39;: [&#39;-lm&#39;],
},
</pre><p>If <code class="code">cruncher</code> was declared as a <code class="code">shared_library</code> instead of a <code class="code">static_library</code>, the <code class="code">cruncher_test</code> target would not contain <code class="code">-lm</code>, but instead, <code class="code">cruncher</code> itself would link against <code class="code">-lm</code>.</p><h2><a class="h" name="Linking-Dependencies" href="InputFormatReference.md#Linking-Dependencies"><span></span></a>Linking Dependencies</h2><p>The precise meaning of a dependency relationship varies with the <a href="InputFormatReference.md#type">types</a> of the <a href="InputFormatReference.md#targets">targets</a> at either end of the relationship.  In GYP, a dependency relationship can indicate two things about how targets relate to each other:</p><ul><li>Whether the dependent target needs to link against the dependency.</li><li>Whether the dependency target needs to be built prior to the dependent.  If the former case is true, this case must be true as well.</li></ul><p>The analysis of the first item is complicated by the differences between static and shared libraries.</p><ul><li>Static libraries are simply collections of object files (<code class="code">.o</code> or <code class="code">.obj</code>) that are used as inputs to a linker (<code class="code">ld</code> or <code class="code">link.exe</code>). Static libraries don&#39;t link against other libraries, they’re collected together and used when eventually linking a shared library or executable.</li><li>Shared libraries are linker output and must undergo symbol resolution.  They must link against other libraries (static or shared) in order to facilitate symbol resolution.  They may be used as libraries in subsequent link steps.</li><li>Executables are also linker output, and also undergo symbol resolution.  Like shared libraries, they must link against static and shared libraries to facilitate symbol resolution.  They may not be reused as linker inputs in subsequent link steps.</li></ul><p>Accordingly, GYP performs an operation referred to as “static library dependency adjustment,” in which it makes each linker output target (shared libraries and executables) link against the static libraries it depends on, either directly or indirectly.  Because the linkable targets link against these static libraries, they are also made direct dependents of the static libraries.</p><p>As part of this process, GYP is also able to remove the direct dependency relationships between two static library targets, as a dependent static library does not actually need to link against a dependency static library.  This removal facilitates speedier builds under some build systems, as they are now free to build the two targets in parallel.  The removal of this dependency is incorrect in some cases, such as when the dependency target contains <a href="InputFormatReference.md#rules">rules</a> or <a href="InputFormatReference.md#actions">actions</a> that generate header files required by the dependent target.  In such cases, the dependency target, the one providing the side-effect files, must declare itself as a <a href="InputFormatReference.md#hard_dependency">hard_dependency</a>.  This setting instructs GYP to not remove the dependency link between two static library targets in its generated output.</p><h2><a class="h" name="Loading-Files-to-Resolve-Dependencies" href="InputFormatReference.md#Loading-Files-to-Resolve-Dependencies"><span></span></a>Loading Files to Resolve Dependencies</h2><p>When GYP runs, it loads all <code class="code">.gyp</code> files needed to resolve dependencies found in <a href="InputFormatReference.md#dependencies">dependencies</a> sections.  These files are not merged into the files that reference them, but they may contain special sections that are merged into dependent target dictionaries.</p><h2><a class="h" name="Build-Configurations" href="InputFormatReference.md#Build-Configurations"><span></span></a>Build Configurations</h2><p>Explain this.</p><h2><a class="h" name="List-Filters" href="InputFormatReference.md#List-Filters"><span></span></a>List Filters</h2><p>GYP allows list items to be filtered by “exclusions” and “patterns.” Any list containing string values in a dictionary may have this filtering applied.  For the purposes of this section, a list modified by exclusions or patterns is referred to as a “base list”, in contrast to the “exclusion list” and “pattern list” that operates on it.</p><ul><li>For a base list identified by key name <code class="code">key</code>, the <code class="code">key!</code> list provides exclusions.</li><li>For a base list identified by key name <code class="code">key</code>, the <code class="code">key/</code> list provides regular expression pattern-based filtering.</li></ul><p>Both <code class="code">key!</code> and <code class="code">key/</code> may be present.  The <code class="code">key!</code> exclusion list will be processed first, followed by the <code class="code">key/</code> pattern list.</p><p>Exclusion lists are most powerful when used in conjunction with <a href="InputFormatReference.md#Conditionals">conditionals</a>.</p><h2><a class="h" name="Exclusion-Lists" href="InputFormatReference.md#Exclusion-Lists"><span></span></a>Exclusion Lists (!)</h2><p>An exclusion list provides a way to remove items from the related list based on exact matching.  Any item found in an exclusion list will be removed from the corresponding base list.</p><h4><a class="h" name="Exclusion-Lists-Example" href="InputFormatReference.md#Exclusion-Lists-Example"><span></span></a>Example</h4><p>This example excludes files from the <code class="code">sources</code> based on the setting of the <code class="code">OS</code> variable.</p><pre class="code">{
  &#39;sources:&#39; [
    &#39;mac_util.mm&#39;,
    &#39;win_util.cc&#39;,
  ],
  &#39;conditions&#39;: [
    [&#39;OS==&quot;mac&quot;&#39;, {&#39;sources!&#39;: [&#39;win_util.cc&#39;]}],
    [&#39;OS==&quot;win&quot;&#39;, {&#39;sources!&#39;: [&#39;mac_util.cc&#39;]}],
  ],
}
</pre><h2><a class="h" name="Pattern-Lists" href="InputFormatReference.md#Pattern-Lists"><span></span></a>Pattern Lists (/)</h2><p>Pattern lists are similar to, but more powerful than, <a href="InputFormatReference.md#Exclusion_Lists_%28!%29">exclusion lists</a>.  Each item in a pattern list is itself a two-element list.  The first item is a string, either <code class="code">&#39;include&#39;</code> or <code class="code">&#39;exclude&#39;</code>, specifying the action to take.  The second item is a string specifying a regular expression.  Any item in the base list matching the regular expression pattern will either be included or excluded, based on the action specified.</p><p>Items in a pattern list are processed in sequence, and an excluded item that is later included will not be removed from the list (unless it is subsequently excluded again.)</p><p>Pattern lists are processed after <a href="InputFormatReference.md#Exclusion_Lists_%28!%29">exclusion lists</a>, so it is possible for a pattern list to re-include items previously excluded by an exclusion list.</p><p>Nothing is actually removed from a base list until all items in an <a href="InputFormatReference.md#Exclusion_Lists_%28!%29">exclusion list</a> and pattern list have been evaluated.  This allows items to retain their correct position relative to one another even after being excluded and subsequently included.</p><h4><a class="h" name="Pattern-Lists-Example" href="InputFormatReference.md#Pattern-Lists-Example"><span></span></a>Example</h4><p>In this example, a uniform naming scheme is adopted for platform-specific files.</p><pre class="code">{
  &#39;sources&#39;: [
    &#39;io_posix.cc&#39;,
    &#39;io_win.cc&#39;,
    &#39;launcher_mac.cc&#39;,
    &#39;main.cc&#39;,
    &#39;platform_util_linux.cc&#39;,
    &#39;platform_util_mac.mm&#39;,
  ],
  &#39;sources/&#39;: [
    [&#39;exclude&#39;, &#39;_win\\.cc$&#39;],
  ],
  &#39;conditions&#39;: [
    [&#39;OS!=&quot;linux&quot;&#39;, {&#39;sources/&#39;: [[&#39;exclude&#39;, &#39;_linux\\.cc$&#39;]]}],
    [&#39;OS!=&quot;mac&quot;&#39;, {&#39;sources/&#39;: [[&#39;exclude&#39;, &#39;_mac\\.cc|mm?$&#39;]]}],
    [&#39;OS==&quot;win&quot;&#39;, {&#39;sources/&#39;: [
      [&#39;include&#39;, &#39;_win\\.cc$&#39;],
      [&#39;exclude&#39;, &#39;_posix\\.cc$&#39;],
    ]}],
  ],
}
</pre><p>After the pattern list is applied, <code class="code">sources</code> will have the following values, depending on the setting of <code class="code">OS</code>:</p><ul><li>When <code class="code">OS</code> is <code class="code">linux</code>: <code class="code">[&#39;io_posix.cc&#39;, &#39;main.cc&#39;, &#39;platform_util_linux.cc&#39;]</code></li><li>When <code class="code">OS</code> is <code class="code">mac</code>: <code class="code">[&#39;io_posix.cc&#39;, &#39;launcher_mac.cc&#39;, &#39;main.cc&#39;, &#39;platform_util_mac.mm&#39;]</code></li><li>When <code class="code">OS</code> is <code class="code">win</code>: <code class="code">[&#39;io_win.cc&#39;, &#39;main.cc&#39;, &#39;platform_util_win.cc&#39;]</code></li></ul><p>Note that when <code class="code">OS</code> is <code class="code">win</code>, the <code class="code">include</code> for <code class="code">_win.cc</code> files is processed after the <code class="code">exclude</code> matching the same pattern, because the <code class="code">sources/</code> list participates in <a href="InputFormatReference.md#Merging">merging</a> during <a href="InputFormatReference.md#Conditonals">conditional evaluation</a> just like any other list would.  This guarantees that the <code class="code">_win.cc</code> files, previously unconditionally excluded, will be re-included when <code class="code">OS</code> is <code class="code">win</code>.</p><h2><a class="h" name="Locating-Excluded-Items" href="InputFormatReference.md#Locating-Excluded-Items"><span></span></a>Locating Excluded Items</h2><p>In some cases, a GYP generator needs to access to items that were excluded by an <a href="InputFormatReference.md#Exclusion_Lists_%28!%29">exclusion list</a> or <a href="InputFormatReference.md#Pattern_Lists_%28/%29">pattern list</a>.  When GYP excludes items during processing of either of these list types, it places the results in an <code class="code">_excluded</code> list.  In the example above, when <code class="code">OS</code> is <code class="code">mac</code>, <code class="code">sources_excluded</code> would be set to <code class="code">[&#39;io_win.cc&#39;, &#39;platform_util_linux.cc&#39;]</code>.  Some GYP generators use this feature to display excluded files in the project files they generate for the convenience of users, who may wish to refer to other implementations.</p><h2><a class="h" name="Processing-Order" href="InputFormatReference.md#Processing-Order"><span></span></a>Processing Order</h2><p>GYP uses a defined and predictable order to execute the various steps performed between loading files and generating output.</p><ul><li>Load files.<ul><li>Load <code class="code">.gyp</code> files.  Merge any <a href="InputFormatReference.md#Including_Other_Files">command-line includes</a> into each <code class="code">.gyp</code> file’s root dictionary.  As <a href="InputFormatReference.md#Including_Other_Files">includes</a> are found, load them as well and <a href="InputFormatReference.md#Merging">merge</a> them into the scope in which the <a href="InputFormatReference.md#includes">includes</a> section was found.</li><li>Perform <a href="InputFormatReference.md#Early_and_Late_Phases">“early” or “pre”</a> <a href="InputFormatReference.md#Variables_and_Conditionals">variable expansion and conditional evaluation</a>.</li><li><a href="InputFormatReference.md#Merging">Merge</a> each <a href="InputFormatReference.md#targets">target’s</a> dictionary into the <code class="code">.gyp</code> file’s root <a href="InputFormatReference.md#target_defaults">target_defaults</a> dictionary.</li><li>Scan each <a href="InputFormatReference.md#targets">target</a> for <a href="InputFormatReference.md#dependencies">dependencies</a>, and repeat the above steps for any newly-referenced <code class="code">.gyp</code> files not yet loaded.</li></ul></li><li>Scan each <a href="InputFormatReference.md#targets">target</a> for wildcard <a href="InputFormatReference.md#dependencies">dependencies</a>, expanding the wildcards.</li><li>Process <a href="InputFormatReference.md#Dependent_Settings">dependent settings</a>.  These sections are processed, in order:<ul><li><a href="InputFormatReference.md#all_dependent_settings">all_dependent_settings</a></li><li><a href="InputFormatReference.md#direct_dependent_settings">direct_dependent_settings</a></li><li><a href="InputFormatReference.md#link_dependent_settings">link_dependent_settings</a></li></ul></li><li>Perform <a href="InputFormatReference.md#Linking_Dependencies">static library dependency adjustment</a>.</li><li>Perform <a href="InputFormatReference.md#Early_and_Late_Phases">“late,” “post,” or “target”</a> <a href="InputFormatReference.md#Variables_and_Conditionals">variable expansion and conditional evaluation</a> on <a href="InputFormatReference.md#targets">target</a> dictionaries.</li><li>Merge <a href="InputFormatReference.md#targets">target</a> settings into <a href="InputFormatReference.md#configurations">configurations</a> as appropriate.</li><li>Process <a href="InputFormatReference.md#List_Exclusions_and_Patterns">exclusion and pattern lists</a>.</li></ul><h2><a class="h" name="Settings-Keys" href="InputFormatReference.md#Settings-Keys"><span></span></a>Settings Keys</h2><h3><a class="h" name="Settings-that-may-appear-anywhere" href="InputFormatReference.md#Settings-that-may-appear-anywhere"><span></span></a>Settings that may appear anywhere</h3><h4><a class="h" name="conditions" href="InputFormatReference.md#conditions"><span></span></a>conditions</h4><p><em>List of <code class="code">condition</code> items</em></p><p>A <code class="code">conditions</code> section introduces a subdictionary that is only merged into the enclosing scope based on the evaluation of a conditional expression.  Each <code class="code">condition</code> within a <code class="code">conditions</code> list is itself a list of at least two items:</p><ol><li>A string containing the conditional expression itself.  Conditional expressions may take the following forms:</li></ol><ul><li>For string values, <code class="code">var==&quot;value&quot;</code> and <code class="code">var!=&quot;value&quot;</code> to test equality and inequality.  For example, <code class="code">&#39;OS==&quot;linux&quot;&#39;</code> is true when the <code class="code">OS</code> variable is set to <code class="code">&quot;linux&quot;</code>.</li><li>For integer values, <code class="code">var==value</code>, <code class="code">var!=value</code>, <code class="code">var&lt;value</code>, <code class="code">var&lt;=value</code>, <code class="code">var&gt;=value</code>, and <code class="code">var&gt;value</code>, to test equality and several common forms of inequality.  For example, <code class="code">&#39;chromium_code==0&#39;</code> is true when the <code class="code">chromium_code</code> variable is set to <code class="code">0</code>.</li><li>It is an error for a conditional expression to reference any undefined variable.</li></ul><ol><li>A dictionary containing the subdictionary to be merged into the enclosing scope if the conditional expression evaluates to true.</li></ol><p>These two items can be followed by any number of similar two items that will be evaluated if the previous conditional expression does not evaluate to true.</p><p>An additional optional dictionary can be appended to this sequence of two items.  This optional dictionary will be merged into the enclosing scope if none of the conditional expressions evaluate to true.</p><p>Within a <code class="code">conditions</code> section, each item is processed sequentially, so it is possible to predict the order in which operations will occur.</p><p>There is no restriction on nesting <code class="code">conditions</code> sections.</p><p><code class="code">conditions</code> sections are very similar to <code class="code">target_conditions</code> sections. See target_conditions.</p><h4><a class="h" name="Settings-Keys-Settings-that-may-appear-anywhere-Example" href="InputFormatReference.md#Settings-Keys-Settings-that-may-appear-anywhere-Example"><span></span></a>Example</h4><pre class="code">{
  &#39;sources&#39;: [
    &#39;common.cc&#39;,
  ],
  &#39;conditions&#39;: [
    [&#39;OS==&quot;mac&quot;&#39;, {&#39;sources&#39;: [&#39;mac_util.mm&#39;]}],
    [&#39;OS==&quot;win&quot;&#39;, {&#39;sources&#39;: [&#39;win_main.cc&#39;]}, {&#39;sources&#39;: [&#39;posix_main.cc&#39;]}],
    [&#39;OS==&quot;mac&quot;&#39;, {&#39;sources&#39;: [&#39;mac_impl.mm&#39;]},
     &#39;OS==&quot;win&quot;&#39;, {&#39;sources&#39;: [&#39;win_impl.cc&#39;]},
     {&#39;sources&#39;: [&#39;default_impl.cc&#39;]}
    ],
  ],
}
</pre><p>Given this input, the <code class="code">sources</code> list will take on different values based on the <code class="code">OS</code> variable.</p><ul><li>If <code class="code">OS</code> is <code class="code">&quot;mac&quot;</code>, <code class="code">sources</code> will contain <code class="code">[&#39;common.cc&#39;, &#39;mac_util.mm&#39;, &#39;posix_main.cc&#39;, &#39;mac_impl.mm&#39;]</code>.</li><li>If <code class="code">OS</code> is <code class="code">&quot;win&quot;</code>, <code class="code">sources</code> will contain <code class="code">[&#39;common.cc&#39;, &#39;win_main.cc&#39;, &#39;win_impl.cc&#39;]</code>.</li><li>If <code class="code">OS</code> is any other value such as <code class="code">&quot;linux&quot;</code>, <code class="code">sources</code> will contain <code class="code">[&#39;common.cc&#39;, &#39;posix_main.cc&#39;, &#39;default_impl.cc&#39;]</code>.</li></ul></div></div></div><footer class="Site-footer"><div class="Footer"><div class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a></div><div class="Footer-links"></ul></div></footer></body></html>